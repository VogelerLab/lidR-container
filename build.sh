#!/usr/bin/env bash
# Author: Daniel Rode
# Dependencies:
#   podman 5.5.2
#   git


# -----------------------------------------------------------------------------
# -----------------------------------------------------------------------------
# Functions
# -----------------------------------------------------------------------------
# -----------------------------------------------------------------------------

# Use Podman instead of Docker
function docker {
    podman "$@"
}


# -----------------------------------------------------------------------------
# -----------------------------------------------------------------------------
# Configure Bash
# -----------------------------------------------------------------------------
# -----------------------------------------------------------------------------

# Exit on error
set -e


# -----------------------------------------------------------------------------
# -----------------------------------------------------------------------------
# Main
# -----------------------------------------------------------------------------
# -----------------------------------------------------------------------------

# Change directory to where this script is
cd "$(dirname "$0")"

# Build container
echo "Building container..."
git_commit="$(git rev-parse HEAD . | head -1)"
docker build \
    --label "git_commit=$git_commit" \
    --tag "vogelerlab/lidr-container:latest" \
;
